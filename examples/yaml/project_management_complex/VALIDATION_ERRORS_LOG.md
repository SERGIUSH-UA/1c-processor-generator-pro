# Лог Помилок Валідації - Project Management Complex

Цей файл містить всі помилки валідації, які виникли при створенні складної обробки для подальшої модернізації документації.

## Дата: 2025-11-17

### Критична Помилка #1: Зарезервоване Ім'я Метаданих

**Помилка:**
```
Таблична частина 'Задачи': Ім'я 'Задачи' є зарезервованим системним іменем метаданих 1C і не може використовуватися як ім'я таблична частина
```

**Рішення:** Змінено на `ЗадачиПроекта`

**Висновок для документації:**
- LLM_CORE.md та LLM_DATA_GUIDE.md мають чітко вказувати список зарезервованих імен
- Потрібно додати приклади альтернативних назв (ЗадачиСписок, МоиЗадачи, ЗадачиТаблица)
- Важливо пояснити ЧОМ ці імена зарезервовані

### Помилка #2: Невалідні Стандартні Картинки

#### 2.1 StdPicture.Copy
**Статус:** НЕ існує
**Спроби виправлення:**
1. Спочатку замінено на `StdPicture.Duplicate` - ТАКОЖ НЕ валідна!
2. Треба використовувати: жодна з запропонованих альтернатив не підходить семантично

**Рекомендація:** Видалити картинку взагалі (опціональний параметр)

#### 2.2 StdPicture.Users
**Статус:** НЕ існує
**Валідна альтернатива:** `StdPicture.User` (однина!)
**Рішення:** Замінено на `StdPicture.User`

**Висновок для документації:**
- В VALID_PICTURES.md треба додати примітку про часті помилки (Users vs User)

#### 2.3 StdPicture.ImportData / ExportData
**Статус:** НЕ існують
**Спроби виправлення:**
1. Замінено на `StdPicture.Import` / `StdPicture.Export` - ТАКОЖ НЕ валідні!

**Висновок:** Import та Export теж не існують у списку валідних картинок

#### 2.4 StdPicture.Settings
**Статус:** НЕ існує
**Валідна альтернатива:** `StdPicture.ListSettings`
**Рішення:** Замінено на `StdPicture.ListSettings`

**Висновок для документації:**
- Settings vs ListSettings - часта помилка, треба додати в common mistakes

#### 2.5 StdPicture.Cancel
**Статус:** НЕ існує
**Спроби виправлення:**
1. Замінено на `StdPicture.Close` - ВАЛІДНА!

**Рішення:** Замінено на `StdPicture.Close`

### Помилка #3: Duplicate також невалідна

**Статус:** НЕ існує
**Контекст:** Використовувалась як заміна для Copy
**Запропоновані альтернативи:** Delete, Replace, Picture, Write, Print
**Жодна не підходить семантично для "копіювати"**

## Рекомендації для Модернізації Документації

### 1. LLM_CORE.md
- **Додати розділ:** "Common Reserved Names" з повним списком зарезервованих імен метаданих
- **Додати правило:** Завжди додавати суфікс/префікс до типових назв (Задачи → ЗадачиПроекта)

### 2. VALID_PICTURES.md
- **Додати розділ:** "Common Mistakes" з таблицею:
  ```
  | НЕПРАВИЛЬНО | ПРАВИЛЬНО | Примітка |
  |-------------|-----------|----------|
  | Users       | User      | Однина!  |
  | Settings    | ListSettings | Повна назва |
  | Cancel      | Close     | Найближча альтернатива |
  | Copy        | -         | Не існує, видаліть picture |
  | Duplicate   | -         | Не існує, видаліть picture |
  | Import      | -         | Не існує, видаліть picture |
  | Export      | -         | Не існує, видаліть picture |
  | ImportData  | -         | Не існує, видаліть picture |
  | ExportData  | -         | Не існує, видаліть picture |
  ```

- **Додати Thinking Framework відповідь:**
  "Якщо картинка не існує і немає семантично правильної альтернативи - просто видаліть параметр picture, він опціональний!"

### 3. LLM_PRACTICES.md
- **Додати Best Practice:**
  "Картинки є опціональними. Якщо не впевнений у назві - краще не вказувати picture взагалі."

### 4. TROUBLESHOOTING.md (новий розділ)
- **Додати розділ:** "Picture Validation Errors"
- Пояснити, як діагностувати та виправляти
- Навести приклади з цього логу

### 5. LLM_DATA_GUIDE.md
- **Додати Warning Box:**
  ```
  ⚠️ УВАГА: Зарезервовані імена метаданих

  НЕ можна використовувати як імена TabularSection:
  - Задачи (Tasks)
  - Документы (Documents)
  - Справочники (Catalogs)
  ... [повний список]

  Рішення: додайте контекст до назви
  ✅ ЗадачиПроекта, МоиЗадачи, ЗадачиСписок
  ```

## Статистика Помилок

- **Критичні:** 2 (зарезервоване ім'я + невірні посилання на реквізити)
- **Валідація картинок:** 9 унікальних випадків (13 входжень в config.yaml)
- **Успішно виправлено:** 4 картинки (User, ListSettings, Close)
- **Не вдалося виправити:** 5 картинок (Copy, Duplicate, Import, Export, ImportData, ExportData)
- **Потребує видалення параметру picture:** 5 команд
- **YAML помилки конфігурації:** 14 невірних посилань на реквізити (виправлено)

## BSL Валідація Помилки (23 помилки через Designer)

### Помилка #4: СтрФорматировать (сучасна функція)
**Статус:** Функція недоступна в 1C 8.3.6 та нижче
**Рішення:** Використати СтрШаблон() замість СтрФорматировать()
**Кількість входжень:** 1

### Помилка #5: ПользовательИмя()
**Статус:** Функція НЕ існує в 1C
**Рішення:** Використати **ІмяПользователя()** (системна функція)
**Кількість входжень:** 3

### Помилка #6: КомментарииЗадачи на неправильній формі
**Статус:** ValueTable КомментарииЗадачи існує на формі КарточкаЗадачи, але код помилково використовується на головній формі
**Рішення:** Видалити функцію ЗаполнитьТестовымиКомментариями з головної форми, залишити тільки на КарточкаЗадачи
**Кількість входжень:** 4

### Помилка #7: РежимСоздания - не оголошена змінна
**Статус:** Змінна використовується на формах КарточкаПроекта та КарточкаЗадачи, але не оголошена
**Рішення:** Додати РежимСоздания як змінну форми (на рівні модуля форми)
**Кількість входжень:** 2

### Помилка #8: Helper functions не інжектовані на форми
**Статус:** Функції-helpers викликаються, але не додані на відповідні форми
**Проблемні функції:**
- КарточкаПроекта: ЗагрузитьДанныеПроектаНаСервере, ИнициализироватьНовыйПроектНаСервере, ПроверитьЗаполнениеПроектаНаСервере, ПолучитьДанныеПроектаНаСервере
- КарточкаЗадачи: ЗагрузитьДанныеЗадачиНаСервере, ИнициализироватьНовуюЗадачуНаСервере, ПроверитьЗаполнениеЗадачиНаСервере, ПолучитьДанныеЗадачиНаСервере, ЗаполнитьТестовымиКомментариями
- ФормаНастроек: ЗагрузитьТекущиеНастройкиНаСервере, ПроверитьНастройкиНаСервере, ПолучитьНастройкиНаСервере, СброситьНастройкиНаСервере

**Рішення:** Це helpers, які генератор має додати як standalone helpers на відповідні форми

**Кількість входжень:** 13

### Помилка #9: "Недопустимая комбинация клавиш" (5 шт)
**Статус:** Виявлено при відкритті XML в 1C
**Можлива причина:** Shortcut "Ctrl+D" може бути зарезервований в 1C
**Рішення:** Видалити невалідні shortcuts або замінити на валідні

### Помилка #10: Невірні посилання на реквізити після перейменування ТЧ ⚠️ КРИТИЧНА
**Статус:** КРИТИЧНА помилка в config.yaml
**Проблема:** Після зміни імені табличної частини з "Задачи" на "ЗадачиПроекта" (через зарезервоване ім'я), забули оновити всі посилання на цю ТЧ в формах
**Виявлення:** Форма КарточкаЗадачи використовує `attribute: Задачи.Название`, але ТЧ "Задачи" не існує!

**Неправильно:**
```yaml
tabular_sections:
  - name: ЗадачиПроекта  # Змінено з "Задачи"

forms:
  - name: КарточкаЗадачи
    elements:
      - attribute: Задачи.Название  # ❌ Задачи не існує!
      - attribute: Задачи.Описание  # ❌
      # ... всього 14 полів з невірними посиланнями
```

**Правильно:**
```yaml
forms:
  - name: КарточкаЗадачи
    elements:
      - attribute: ЗадачиПроекта.Название  # ✅
      - attribute: ЗадачиПроекта.Описание  # ✅
      # ... всі 14 полів виправлено
```

**Список виправлених полів (14 шт):**
1. ПолеЗадачаНазвание
2. ПолеЗадачаОписание
3. ПолеЗадачаСтатус
4. ПолеЗадачаПриоритет
5. ПолеЗадачаТип
6. ПолеЗадачаИсполнитель
7. ПолеЗадачаАвтор
8. ПолеЗадачаДатаСоздания
9. ПолеЗадачаДатаНачала
10. ПолеЗадачаДатаОкончания
11. ПолеЗадачаПлановоеВремя
12. ПолеЗадачаФактическоеВремя
13. ПолеЗадачаЗавершеноПроцентов
14. ПолеЗадачаТеги

**Вплив:** EPF не відкриється взагалі! Помилки на кшталт "Реквізит Задачи.Название не існує"

**Рекомендація для документації:**
- LLM_CORE.md додати THINKING STEP: "Якщо я перейменував метадані (ТЧ, реквізит), чи оновив я ВСІ посилання на них у всіх формах?"
- Генератор міг би валідувати, що всі attribute references вказують на існуючі об'єкти

## Наступні Кроки

1. ✅ Виправити зарезервоване ім'я Задачи → ЗадачиПроекта
2. ✅ Виправити валідні картинки (User, ListSettings, Close)
3. ✅ Видалити невалідні картинки з config.yaml
4. ✅ Перевірити компіляцію через Designer (виявлено 23 BSL помилки)
5. ✅ Виправити невірні посилання на реквізити (Задачи.* → ЗадачиПроекта.*)
6. ⏳ Виправити BSL помилки:
   - ✅ СтрФорматировать → СтрШаблон
   - ✅ ПользовательИмя → ІмяПользователя
   - ⏳ Видалити КомментарииЗадачи з головної форми
   - ⏳ Додати РежимСоздания як змінну форми
   - ⏳ Забезпечити інжекцію helpers на форми
   - ⏳ Видалити невалідні shortcuts
7. ⏳ Оновити документацію на основі цього логу

## Корисні Висновки

1. **Зарезервовані імена** - критична проблема, яку важко передбачити без явного списку в документації
2. **Картинки** - найчастіша проблема валідації (9/10 помилок)
3. **Інтуїтивні назви не завжди працюють** (Users замість User, Settings замість ListSettings)
4. **Деякі картинки просто не існують** (Copy, Import, Export) - треба чітко про це написати
5. **Опціональність параметрів** - не завжди очевидна для LLM
