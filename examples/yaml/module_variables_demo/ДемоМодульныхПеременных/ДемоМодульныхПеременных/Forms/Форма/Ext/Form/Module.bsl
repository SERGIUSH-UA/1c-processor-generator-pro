//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
// Produced by 1C-PG Generator (Free License) 
// itdeo.tech/1c-processor-generator	
//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~	

#Область ОписаниеПеременных 

// Клієнтські змінні для гри 
&НаКлиенте	
Перем Направление, Позиция, Очки;  // Стан гри	
// Ще одна клієнтська змінна 
&НаКлиенте	
Перем ИграАктивна;	
// Серверні змінні для кешування 
&НаСервере 
Перем СерверныйКеш;  // Кеш даних	
// Змінна без директиви (доступна скрізь) 
Перем ОбщаяПеременная; 

#КонецОбласти 

#Область ОбработчикиСобытийФормы	

&НаСервере	
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка) 

    // Ініціалізація серверного кешу 
    СерверныйКеш = Новый Соответствие; 
    ОбщаяПеременная = "Ініціалізовано";	

    Объект.СтатусИгры = "Готово до старту"; 

КонецПроцедуры 

#КонецОбласти 

#Область ОбработчикиСобытийЭлементовШапкиФормы	

// Обработчики событий элементов формы	

#КонецОбласти 

#Область ОбработчикиКомандФормы 

&НаКлиенте	
Процедура НачатьИгру(Команда)	

    // Ініціалізація клієнтських змінних
    Направление = "Вправо";
    Позиция = Новый Структура("X, Y", 5, 5);
    Очки = 0;
    ИграАктивна = Истина;

    Объект.СтатусИгры = "Гра активна";
    Объект.Счетчик = Очки;

КонецПроцедуры

&НаКлиенте
Процедура ОстановитьИгру(Команда)

    Если НЕ ИграАктивна Тогда
        Сообщить("Гра не запущена!");
        Возврат;
    КонецЕсли;

    ИграАктивна = Ложь;
    Объект.СтатусИгры = "Гра зупинена. Очки: " + Очки;

КонецПроцедуры

&НаКлиенте
Процедура СбросИгры(Команда)

    Направление = Неопределено;
    Позиция = Неопределено;
    Очки = 0;
    ИграАктивна = Ложь;

    Объект.СтатусИгры = "Скинуто";
    Объект.Счетчик = 0;

КонецПроцедуры

&НаКлиенте
Процедура ЗагрузитьКеш(Команда)

    ЗагрузитьКешНаСервере();
    Сообщить("Кеш завантажено");

КонецПроцедуры

&НаСервере
Процедура ЗагрузитьКешНаСервере()

    // Використовуємо серверну змінну
    СерверныйКеш.Вставить("ДатаЗагрузки", ТекущаяДата());
    СерверныйКеш.Вставить("Пользователь", ИмяПользователя());
    СерверныйКеш.Вставить("КоличествоЗаписей", 100);

    Объект.СтатусИгры = "Кеш: " + СерверныйКеш.Количество() + " записів";

КонецПроцедуры

&НаКлиенте
Процедура ОчиститьКеш(Команда)

    ОчиститьКешНаСервере();
    Сообщить("Кеш очищено");

КонецПроцедуры

&НаСервере
Процедура ОчиститьКешНаСервере()

    СерверныйКеш.Очистить();
    Объект.СтатусИгры = "Кеш очищено";

КонецПроцедуры

#КонецОбласти


// PG-ref [5a9aff6a]

#Область СлужебныеПроцедурыИФункции

// Вспомогательные функции

#КонецОбласти