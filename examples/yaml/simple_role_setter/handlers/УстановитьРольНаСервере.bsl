// Серверна процедура для установки ролі
// Працює з інформаційною базою

// Знаходимо користувача ІБ
ПользовательИБ = ПользователиИнформационнойБазы.НайтиПоУникальномуИдентификатору(
	Объект.Пользователь.ИдентификаторПользователяИБ
);

Если ПользовательИБ = Неопределено Тогда
	Сообщить("Пользователь информационной базы не найден!");
	Возврат;
КонецЕсли;

// Знаходимо роль в метаданих
Роль = Метаданные.Роли.Найти(Объект.Роль);

Если Роль = Неопределено Тогда
	Сообщить("Роль '" + Объект.Роль + "' не найдена в конфигурации!");
	Возврат;
КонецЕсли;

// Додаємо роль користувачу
Попытка
	ПользовательИБ.Роли.Добавить(Роль);
	ПользовательИБ.Записать();
	Сообщить("Роль '" + Объект.Роль + "' успешно установлена пользователю '" + Объект.Пользователь + "'!");
Исключение
	Сообщить("Ошибка при установке роли: " + ОписаниеОшибки());
КонецПопытки;