# Unlimited String Example

**Version:** 2.7.3+
**Purpose:** Demonstrate unlimited vs limited string types in the generator

---

## Overview

This example demonstrates the **NEW default behavior in v2.6.0**: string attributes are **unlimited by default** (length=0).

### Key Features

1. **Unlimited Strings (Default)**
   - No length restriction
   - `type: string` without length parameter
   - XML: `<v8:Length>0</v8:Length>`

2. **Limited Strings**
   - Explicit length restriction
   - `type: string, length: 100`
   - XML: `<v8:Length>100</v8:Length>`

3. **Examples in All Contexts**
   - Processor attributes
   - ValueTable columns
   - TabularSection columns

---

## What Changed in v2.6.0

### Before (v2.5.x and earlier):
```yaml
type: string              # Defaulted to length=100
type: string, length: 0   # Had to specify for unlimited
```

### Now (v2.6.0+):
```yaml
type: string              # Defaults to length=0 (UNLIMITED)
type: string, length: 100 # Specify for limited strings
```

This change aligns with 1C platform conventions where `length=0` means unlimited.

---

## File Structure

```
unlimited_string_example/
├── config.yaml           # YAML configuration
├── handlers.bsl          # BSL business logic
└── README.md            # This file
```

---

## YAML Configuration Highlights

### Unlimited Strings (Default)
```yaml
attributes:
  # No length specified → unlimited (default)
  - name: ПолноеОписание
    type: string

  # Explicit unlimited (same result)
  - name: ДлинныйТекст
    type: string
    length: 0
```

### Limited Strings
```yaml
attributes:
  # Limited to 10 characters
  - name: КороткийКод
    type: string
    length: 10

  # Limited to 100 characters
  - name: СреднееПоле
    type: string
    length: 100
```

---

## Usage

### Generate the Processor

```bash
# From project root
python -m 1c_processor_generator yaml \
  --config examples/yaml/unlimited_string_example/config.yaml \
  --handlers-file examples/yaml/unlimited_string_example/handlers.bsl
```

### What It Does

1. **On form open** - Fills fields with explanatory text showing unlimited vs limited strings
2. **"Заполнить пример" button** - Fills both ValueTable and TabularSection with example data
3. **"Проверить длину" button** - Shows character counts for all fields, highlighting the difference

---

## Generated XML Output

### Unlimited String (length=0):
```xml
<Attribute uuid="...">
  <Properties>
    <Name>ПолноеОписание</Name>
    <Type>
      <v8:Type>xs:string</v8:Type>
      <v8:StringQualifiers>
        <v8:Length>0</v8:Length>  <!-- ← Unlimited! -->
        <v8:AllowedLength>Variable</v8:AllowedLength>
      </v8:StringQualifiers>
    </Type>
  </Properties>
</Attribute>
```

### Limited String (length=100):
```xml
<Attribute uuid="...">
  <Properties>
    <Name>СреднееПоле</Name>
    <Type>
      <v8:Type>xs:string</v8:Type>
      <v8:StringQualifiers>
        <v8:Length>100</v8:Length>  <!-- ← Limited to 100 chars -->
        <v8:AllowedLength>Variable</v8:AllowedLength>
      </v8:StringQualifiers>
    </Type>
  </Properties>
</Attribute>
```

---

## When to Use Each Type

### ✅ Use Unlimited Strings (default) For:
- Descriptions, comments, notes
- User-generated text content
- URLs, file paths
- JSON/XML data
- Any text where length is unpredictable

### ✅ Use Limited Strings For:
- Codes, identifiers (e.g., `length: 20`)
- Status fields (e.g., `length: 50`)
- Short classifications
- Fixed-format data

---

## Testing in 1C

1. Generate the processor using the command above
2. Load the .epf file into 1C:Enterprise
3. Open the form
4. Try entering very long text in unlimited fields (ПолноеОписание, ДлинныйТекст)
5. Try entering text longer than limit in limited fields (КороткийКод - 10 chars max)
6. Click "Проверить длину" to see character counts

---

## Migration Guide

If you have existing YAML configs that relied on the old default behavior:

### Old YAML (v2.5.x and earlier):
```yaml
attributes:
  - name: ShortCode
    type: string        # Was limited to 100
```

### Update for v2.6.0+:
```yaml
attributes:
  - name: ShortCode
    type: string
    length: 100        # ← Add explicit length if you need it limited
```

**Most cases:** The new unlimited default is what you want! Only add `length` if you specifically need a limit.

---

## Related Documentation

- **CHEATSHEET.md** - Quick reference for string types
- **LLM_PROMPT.md** - LLM guide with data types table
- **CLAUDE.md** - String types section in Key Patterns

---

## Version History

- **v2.6.0** (2025-10-16) - Changed default string behavior to unlimited (length=0)
- **v2.5.x and earlier** - Strings defaulted to length=100

---

**Generated by:** 1C Processor Generator v2.6.0+
